/*
 * JDlgDetalleCorrida.java
 *
 * Created on 2 de marzo de 2008, 08:40 PM
 */

package tms_psd;

import java.awt.Dimension;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.JComponent;
import javax.swing.JTable;
import javax.swing.KeyStroke;
import javax.swing.ListSelectionModel;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;

/**
 *
 * @author  ocruz
 */
public class JDlgDetalleCorrida extends javax.swing.JDialog {
    
    /** Creates new form JDlgDetalleCorrida */
    public JDlgDetalleCorrida(Object[][] pObject, int pFila, String claveCorrida) {
        fila = pFila;
        objeto = pObject;
        initComponents();
        this.setModal(true);
        centrarJDialog();
        this.jTblDetalle.registerKeyboardAction(new ActionListener() { 
        public void actionPerformed(ActionEvent e) { ; }}, KeyStroke.getKeyStroke(KeyEvent.VK_F10, 0), JComponent.WHEN_FOCUSED);
        construyeResumen();
        xDetalle.setDataVector(resumen, detalle);
        AnchoColumnasDetalle();
        this.setTitle("Detalle Corrida: "+claveCorrida);
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        jScpDetalle = new javax.swing.JScrollPane();
        jTblDetalle = new javax.swing.JTable();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        setTitle("Detalle Corrida");
        addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                formComponentShown(evt);
            }
        });

        jTblDetalle.setFont(new java.awt.Font("Tahoma", 1, 12));
        jTblDetalle.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTblDetalle.setModel(xDetalle);
        jTblDetalle.setAutoscrolls(false);
        jTblDetalle.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0),"none");
        //jTblDetalle.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        jTblDetalle.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jTblDetalle.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTblDetalleKeyPressed(evt);
            }
        });

        jScpDetalle.setViewportView(jTblDetalle);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel1.setText("<html><font color = ff0000>ESC</font> Cerrar</html>");

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jLabel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 425, Short.MAX_VALUE)
            .add(layout.createSequentialGroup()
                .add(10, 10, 10)
                .add(jScpDetalle, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 405, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                .add(jScpDetalle, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 179, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(jLabel1))
        );
        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void formComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_formComponentShown
// TODO add your handling code here:
        jTblDetalle.requestFocusInWindow();
    }//GEN-LAST:event_formComponentShown

    private void jTblDetalleKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTblDetalleKeyPressed
// TODO add your handling code here:
        switch(evt.getKeyCode()){
            case KeyEvent.VK_ESCAPE:
                this.dispose();
                break;
        }
    }//GEN-LAST:event_jTblDetalleKeyPressed

    private void AnchoColumnasDetalle(){
        TableColumn column = null;
        int anchoContenedor = jScpDetalle.getWidth();
        for (int i = 0; i < 2; i++) {
            column = jTblDetalle.getColumnModel().getColumn(i);
            switch(i){
                // campo - dato
                case 0: column.setPreferredWidth(Math.round(anchoContenedor*(float)0.35)); break;
                case 1: column.setPreferredWidth(Math.round(anchoContenedor*(float)0.65)); break;
            }
            column.setResizable(false);
        }
    }
    
    private void centrarJDialog(){
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension frameSize = this.getSize();
        if (frameSize.height > screenSize.height) {
            frameSize.height = screenSize.height;
        }
        if (frameSize.width > screenSize.width) {
            frameSize.width = screenSize.width;
        }
        this.setLocation( ( screenSize.width - frameSize.width ) / 2, ( screenSize.height - frameSize.height ) / 2 );
    }

    private void construyeResumen() {
        resumen = new Object[9][2];
        for(int i=0; i<9; i++){
            resumen[i][0]=campos[i];
            resumen[i][1]=objeto[fila][i];
        }
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScpDetalle;
    private javax.swing.JTable jTblDetalle;
    // End of variables declaration//GEN-END:variables
    SesionVenta sesionVenta = null;
    int fila;
    private Object[][] objeto;
    private Object[] campos = {"Autobus", "Autobus Sustituto", "Operador", "Nombre", "Operador Sustituto", "Nombre Op. Sust.", "Cancela a", "Edo Tarjeta Viaje", "Folio"};
    private Object[] detalle = {" ", " "};
    private Object[][] resumen;
    private DefaultTableModel xDetalle = new DefaultTableModel(null, detalle){
            public boolean isCellEditable(int row, int col) {
                return false;
            }   
    };
}
